<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Dott. Emanuel Savianu | App</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        primary: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8' }
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'nav': '0 -4px 20px rgba(0,0,0,0.03)',
                    }
                }
            }
        }
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Modern Mobile Reset */
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }

        /* Safe Areas */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom, 20px); }
        .pt-safe { padding-top: env(safe-area-inset-top, 20px); }
        .pb-nav { padding-bottom: calc(80px + env(safe-area-inset-bottom, 20px)); }

        /* Utilities */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .active-scale:active { transform: scale(0.96); transition: transform 0.1s; }
        
        .glass-nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-top: 1px solid rgba(0,0,0,0.05);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-enter { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="text-slate-800 h-[100dvh] w-screen overflow-hidden select-none">
    
    <div id="root"></div>

    <script type="text/babel">
        // --- SETUP ---
        const { useState, useEffect, useMemo, memo } = React;

        // --- ICONS (Inlined for reliability) ---
        const Icons = {
            Home: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            Calendar: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
            Phone: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
            Info: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>,
            Globe: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>,
            ChevronRight: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>,
            FileText: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>,
            ShieldCheck: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>,
            ExternalLink: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>,
            Stethoscope: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4"/><circle cx="20" cy="10" r="2"/></svg>,
            AlertTriangle: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
            Clock: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            MapPin: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>,
            Mail: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
        };

        // --- CONFIG & DATA ---
        const DATA = {
            it: {
                role: "Medico di Medicina Generale",
                tab_home: "Home",
                tab_book: "Prenota",
                tab_contact: "Contatti",
                tab_info: "Info",
                
                card_millebook_title: "MilleBook",
                card_millebook_desc: "Ricette, Appuntamenti e Fascicolo",
                btn_access: "Accedi",
                
                card_emergency_title: "Emergenza?",
                card_emergency_desc: "Per urgenze mediche gravi chiama il 112",
                btn_call_112: "Chiama 112",
                
                section_services: "Servizi Rapidi",
                srv_new_patient: "Nuovi Pazienti",
                srv_drugs: "Modulo Farmaci",
                srv_guard: "Guardia Medica",

                book_title: "Prenotazioni",
                alert_millebook: "Si prega di utilizzare esclusivamente MilleBook per la gestione ordinaria.",
                btn_book_visit: "Prenota Visita",
                
                hours_title: "Orari Studio",
                status_open: "Aperto ora",
                status_closed: "Chiuso",
                
                contact_title: "Contattami",
                address: "Via Esempio 123, Città",
                privacy_policy: "Privacy Policy"
            },
            en: {
                role: "General Practitioner",
                tab_home: "Home",
                tab_book: "Book",
                tab_contact: "Contact",
                tab_info: "Info",
                
                card_millebook_title: "MilleBook",
                card_millebook_desc: "Prescriptions & Appointments",
                btn_access: "Login",
                
                card_emergency_title: "Emergency?",
                card_emergency_desc: "For medical emergencies call 112",
                btn_call_112: "Call 112",
                
                section_services: "Quick Services",
                srv_new_patient: "New Patients",
                srv_drugs: "Drug Form",
                srv_guard: "Out-of-hours",

                book_title: "Booking",
                alert_millebook: "Please use MilleBook for all routine requests.",
                btn_book_visit: "Book Visit",
                
                hours_title: "Opening Hours",
                status_open: "Open now",
                status_closed: "Closed",
                
                contact_title: "Contact Me",
                address: "Via Example 123, City",
                privacy_policy: "Privacy Policy"
            }
        };

        const HOURS = [
            { day: "Lun", time: "17:00 – 18:30" },
            { day: "Mar", time: "11:30 – 13:00" },
            { day: "Mer", time: "17:00 – 18:30" },
            { day: "Gio", time: "11:30 – 13:00" },
            { day: "Ven", time: "17:00 – 18:30" },
            { day: "Sab", time: "Chiuso", closed: true },
            { day: "Dom", time: "Chiuso", closed: true },
        ];

        // --- COMPONENTS ---

        const Card = ({ children, className = "", onClick }) => (
            <div 
                onClick={onClick}
                className={`bg-white p-5 rounded-2xl shadow-soft border border-slate-100 ${onClick ? 'active-scale cursor-pointer hover:bg-slate-50 transition-colors' : ''} ${className}`}
            >
                {children}
            </div>
        );

        const Header = memo(({ lang, toggleLang, t }) => (
            <header className="fixed top-0 w-full z-40 bg-white/90 backdrop-blur-md border-b border-slate-100 pt-safe px-6 pb-3 transition-all duration-300">
                <div className="flex justify-between items-center h-14">
                    <div className="flex flex-col">
                        <span className="text-[10px] font-bold text-blue-600 uppercase tracking-widest mb-0.5">{t.role}</span>
                        <h1 className="text-xl font-bold text-slate-900 leading-none">Dott. Savianu</h1>
                    </div>
                    <button 
                        onClick={toggleLang}
                        className="flex items-center gap-1.5 bg-slate-100 hover:bg-slate-200 px-3 py-1.5 rounded-full text-xs font-bold text-slate-600 transition-colors active-scale"
                    >
                        <Icons.Globe width={14} height={14} />
                        {lang.toUpperCase()}
                    </button>
                </div>
            </header>
        ));

        // --- VIEWS ---

        const HomeView = ({ t }) => (
            <div className="space-y-5 animate-enter">
                <Card className="bg-gradient-to-br from-blue-600 to-blue-700 text-white shadow-lg shadow-blue-500/30 border-none relative overflow-hidden group" onClick={() => window.open('https://millebook.it', '_blank')}>
                    <div className="absolute -top-6 -right-6 p-4 opacity-[0.08] group-hover:scale-110 transition-transform duration-500">
                        <Icons.FileText width={140} height={140} />
                    </div>
                    <div className="relative z-10">
                        <div className="flex items-center gap-2 mb-2">
                            <div className="bg-white/20 backdrop-blur-md p-1 rounded-md"><Icons.ShieldCheck width={16} height={16} className="text-white" /></div>
                            <span className="text-xs font-bold uppercase tracking-widest text-blue-100">Pazienti Registrati</span>
                        </div>
                        <h2 className="text-2xl font-bold mb-1">{t.card_millebook_title}</h2>
                        <p className="text-blue-100 text-sm mb-5 leading-relaxed opacity-90">{t.card_millebook_desc}</p>
                        <div className="inline-flex items-center bg-white text-blue-700 px-4 py-2.5 rounded-xl text-sm font-bold shadow-md active-scale">
                            {t.btn_access} <Icons.ExternalLink width={16} height={16} className="ml-2" />
                        </div>
                    </div>
                </Card>

                <div>
                    <h3 className="text-xs font-bold text-slate-400 mb-3 uppercase tracking-wider px-1">{t.section_services}</h3>
                    <div className="grid grid-cols-2 gap-3">
                        <Card onClick={() => window.open('https://miodottore.it', '_blank')} className="flex flex-col items-center justify-center text-center py-6 gap-3">
                            <div className="p-3 bg-emerald-50 text-emerald-600 rounded-full shadow-sm">
                                <Icons.Stethoscope width={24} height={24} />
                            </div>
                            <span className="font-semibold text-sm leading-tight">{t.srv_new_patient}</span>
                        </Card>

                        <Card className="flex flex-col items-center justify-center text-center py-6 gap-3" onClick={() => alert('Coming Soon')}>
                            <div className="p-3 bg-purple-50 text-purple-600 rounded-full shadow-sm">
                                <Icons.FileText width={24} height={24} />
                            </div>
                            <span className="font-semibold text-sm leading-tight">{t.srv_drugs}</span>
                        </Card>
                    </div>
                </div>

                <Card className="border-red-100 bg-red-50/40" onClick={() => window.location.href = 'tel:112'}>
                    <div className="flex items-center gap-4">
                        <div className="p-3 bg-red-100 text-red-600 rounded-full shrink-0 animate-pulse">
                            <Icons.AlertTriangle width={24} height={24} />
                        </div>
                        <div className="flex-1">
                            <h3 className="font-bold text-red-900">{t.card_emergency_title}</h3>
                            <p className="text-xs text-red-700/80">{t.card_emergency_desc}</p>
                        </div>
                        <div className="bg-red-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm">
                            112
                        </div>
                    </div>
                </Card>
            </div>
        );

        const BookingView = ({ t }) => (
            <div className="space-y-4 animate-enter">
                 <div className="bg-amber-50 border border-amber-100 rounded-2xl p-4 flex gap-3">
                    <Icons.Info className="text-amber-600 shrink-0 mt-0.5" width={18} height={18} />
                    <p className="text-xs text-amber-800 leading-relaxed font-medium">
                        {t.alert_millebook}
                    </p>
                </div>

                <div className="space-y-3">
                    <Card onClick={() => window.open('https://millebook.it', '_blank')} className="flex items-center justify-between group">
                        <div className="flex items-center gap-4">
                            <div className="w-12 h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-lg shadow-inner">M</div>
                            <div>
                                <h3 className="font-bold text-slate-900">MilleBook</h3>
                                <p className="text-xs text-slate-500">Ricette e Appuntamenti</p>
                            </div>
                        </div>
                        <Icons.ChevronRight className="text-slate-300 group-active:text-blue-500 transition-colors" width={24} height={24} />
                    </Card>

                    <Card onClick={() => window.open('https://miodottore.it', '_blank')} className="flex items-center justify-between group">
                        <div className="flex items-center gap-4">
                            <div className="w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center shadow-inner">
                                <Icons.Calendar width={22} height={22} />
                            </div>
                            <div>
                                <h3 className="font-bold text-slate-900">{t.btn_book_visit}</h3>
                                <p className="text-xs text-slate-500">MioDottore</p>
                            </div>
                        </div>
                        <Icons.ChevronRight className="text-slate-300 group-active:text-emerald-500 transition-colors" width={24} height={24} />
                    </Card>
                </div>
            </div>
        );

        const InfoView = ({ t }) => {
            const today = new Date().getDay(); 
            const todayIndex = today === 0 ? 6 : today - 1;

            return (
                <div className="space-y-6 animate-enter">
                    <Card>
                        <h3 className="font-bold text-lg mb-4 flex items-center gap-2 text-slate-800">
                            <Icons.Clock className="text-blue-600" width={20} height={20} />
                            {t.hours_title}
                        </h3>
                        <div className="space-y-2">
                            {HOURS.map((h, i) => {
                                const isToday = i === todayIndex;
                                return (
                                    <div key={i} className={`flex justify-between items-center text-sm p-3 rounded-xl transition-colors ${isToday ? 'bg-blue-50/80 border border-blue-100 shadow-sm' : 'border border-transparent'}`}>
                                        <span className={`font-medium ${isToday ? 'text-blue-700' : 'text-slate-500'}`}>{h.day}</span>
                                        {h.closed ? (
                                            <span className="text-xs font-bold text-slate-400 bg-slate-100 px-2 py-1 rounded-md">{t.status_closed}</span>
                                        ) : (
                                            <span className={`font-semibold ${isToday ? 'text-blue-900' : 'text-slate-700'}`}>{h.time}</span>
                                        )}
                                    </div>
                                )
                            })}
                        </div>
                    </Card>

                    <Card className="bg-slate-800 text-white border-none shadow-lg shadow-slate-500/20">
                        <div className="flex gap-4">
                            <div className="p-2.5 bg-white/10 rounded-xl h-fit">
                                <Icons.AlertTriangle width={24} height={24} className="text-yellow-400" />
                            </div>
                            <div>
                                <h4 className="font-bold text-yellow-400 mb-1">{t.srv_guard}</h4>
                                <p className="text-xs text-slate-300 leading-relaxed mb-3">
                                    Attivo tutte le notti (20:00 - 08:00), festivi e prefestivi.
                                </p>
                                <a href="tel:116117" className="inline-block bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors">
                                    Chiama 116117
                                </a>
                            </div>
                        </div>
                    </Card>
                </div>
            );
        };

        const ContactView = ({ t }) => (
            <div className="space-y-6 animate-enter">
                <Card>
                    <h3 className="font-bold text-lg mb-4">{t.contact_title}</h3>
                    <div className="space-y-3">
                        <div 
                            className="flex items-start gap-4 p-4 bg-slate-50 rounded-xl active-scale cursor-pointer border border-slate-100" 
                            onClick={() => window.open('https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(t.address))}
                        >
                            <div className="bg-white p-2 rounded-full shadow-sm">
                                <Icons.MapPin className="text-blue-600" width={20} height={20} />
                            </div>
                            <div>
                                <p className="font-semibold text-slate-900">Studio Medico</p>
                                <p className="text-sm text-slate-500 leading-relaxed mb-1">{t.address}</p>
                                <span className="text-xs text-blue-600 font-bold">Apri Navigatore</span>
                            </div>
                        </div>
                        
                        <div className="flex items-center gap-4 p-4 bg-slate-50 rounded-xl active-scale cursor-pointer border border-slate-100" onClick={() => window.location.href = "mailto:info@dr-savianu.it"}>
                             <div className="bg-white p-2 rounded-full shadow-sm">
                                <Icons.Mail className="text-blue-600" width={20} height={20} />
                             </div>
                            <div>
                                <p className="font-semibold text-slate-900">Email</p>
                                <p className="text-sm text-slate-500">info@dr-savianu.it</p>
                            </div>
                        </div>
                    </div>
                </Card>
                <div className="text-center pb-8">
                     <p className="text-[10px] text-slate-400 mb-2 uppercase tracking-widest">P.IVA: 00000000000</p>
                     <button className="text-xs text-slate-500 underline decoration-slate-300">{t.privacy_policy}</button>
                </div>
            </div>
        );

        // --- NAV ---
        
        const NavIcon = ({ Icon, label, active, onClick }) => (
            <button 
                onClick={onClick}
                className={`flex-1 flex flex-col items-center justify-center gap-1.5 h-full transition-all duration-200 active:scale-90 ${active ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}
            >
                <div className={`relative p-1.5 rounded-xl transition-all ${active ? 'bg-blue-50' : ''}`}>
                    <Icon width={24} height={24} strokeWidth={active ? 2.5 : 2} />
                    {active && <span className="absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-blue-600"></span>}
                </div>
                <span className={`text-[10px] font-medium transition-colors ${active ? 'text-blue-700' : 'text-slate-500'}`}>
                    {label}
                </span>
            </button>
        );

        // --- MAIN ---

        const App = () => {
            const [lang, setLang] = useState('it');
            const [activeTab, setActiveTab] = useState('home');
            
            const t = useMemo(() => DATA[lang], [lang]);
            const toggleLang = () => setLang(l => l === 'it' ? 'en' : 'it');

            return (
                <div className="h-full flex flex-col bg-slate-50/50">
                    <Header lang={lang} toggleLang={toggleLang} t={t} />

                    <main className="flex-1 overflow-y-auto no-scrollbar pt-20 pb-nav px-4">
                        <div className="max-w-md mx-auto py-2">
                            {activeTab === 'home' && <HomeView t={t} />}
                            {activeTab === 'book' && <BookingView t={t} />}
                            {activeTab === 'info' && <InfoView t={t} />}
                            {activeTab === 'contact' && <ContactView t={t} />}
                        </div>
                    </main>

                    <nav className="fixed bottom-0 w-full glass-nav pb-safe z-50 shadow-nav">
                        <div className="flex h-[60px] items-center justify-around max-w-md mx-auto">
                            <NavIcon Icon={Icons.Home} label={t.tab_home} active={activeTab === 'home'} onClick={() => setActiveTab('home')} />
                            <NavIcon Icon={Icons.Calendar} label={t.tab_book} active={activeTab === 'book'} onClick={() => setActiveTab('book')} />
                            <NavIcon Icon={Icons.Info} label={t.tab_info} active={activeTab === 'info'} onClick={() => setActiveTab('info')} />
                            <NavIcon Icon={Icons.Phone} label={t.tab_contact} active={activeTab === 'contact'} onClick={() => setActiveTab('contact')} />
                        </div>
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
